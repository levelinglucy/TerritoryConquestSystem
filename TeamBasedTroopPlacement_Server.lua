-- Core placement logic already explained, restored here.